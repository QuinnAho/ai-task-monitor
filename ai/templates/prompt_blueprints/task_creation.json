{
  "$schema": "../../../schemas/prompt_blueprint.json",
  "blueprint_id": "task_creation",
  "description": "Generates a planning prompt that forces an AI agent to run a feasibility review before creating a task module and checklist for new features.",
  "agent": "codex",
  "summary": {
    "file": "ai/templates/prompt_blueprints/task_creation.json",
    "purpose": "Blueprint guiding task creation prompts that enforce checklist, file, and logging rules."
  },
  "placeholders": [
    {
      "name": "task_id",
      "description": "Identifier to assign to the new top-level task (e.g., TASK_010_new_feature)",
      "example": "TASK_010_new_feature",
      "required": true
    },
    {
      "name": "task_title",
      "description": "Human readable title for the new task",
      "example": "Implement Remote Monitor Snapshot",
      "required": true
    },
    {
      "name": "task_summary",
      "description": "Short paragraph explaining the task goal and success signal",
      "example": "Expose read-only monitor view that mirrors local editor task files",
      "required": true
    },
    {
      "name": "inputs",
      "description": "Key inputs/context (files to inspect, stakeholders, constraints)",
      "example": "ai/AI_TASK_MONITOR_CONTRACT.md;docs/requirements_architecture.md",
      "required": true
    },
    {
      "name": "expected_files",
      "description": "Files or artifacts the task must produce (comma/semicolon separated)",
      "example": "src/server/routes/snapshots.ts;docs/remote_monitor.md",
      "required": true
    },
    {
      "name": "acceptance_criteria",
      "description": "Numbered or semicolon separated acceptance criteria for the task",
      "example": "Remote snapshot builds;Schema validation passes;UI renders timestamp",
      "required": true
    },
    {
      "name": "references",
      "description": "Contract or guideline references the agent must obey",
      "example": "ai/AI_TASK_MONITOR_CONTRACT.md;docs/schema_strategy.md",
      "required": false,
      "default": "ai/AI_TASK_MONITOR_CONTRACT.md"
    }
  ],
  "template": {
    "id": "prompt_{{task_id}}_task_creation",
    "description": "Task creation + decomposition prompt for {{task_title}} ({{task_id}})",
    "body": "You are the AI Task Monitor assistant orchestrating new work. Every action must honor ai/AI_TASK_MONITOR_CONTRACT.md and the Master Prompt workflow.\n\nTask request context:\n- Auto-assigned Task ID: {{task_id}}\n- Title: {{task_title}}\n- Summary: {{task_summary}}\n- Inputs/context: {{inputs}}\n- Required artifacts: {{expected_files}}\n- Acceptance criteria: {{acceptance_criteria}}\n- Governing references (consult each before answering): {{references}}\n\nProcess:\n1. **Feasibility Review** – Inspect the referenced docs (architecture, schema, file access, etc.) and determine whether implementing {{task_title}} fits the current design. List impacted subsystems/files, contract clauses that apply, open questions, and risks. Do not promise implementation yet.\n2. **User Checkpoint** – Explicitly recommend Go/No-Go and state what confirmation is needed. If blocked, stop after explaining why and what information is missing.\n3. **Task Module Draft** – Only after recommending \"Go\" describe the exact task module to create: task.json content (description, inputs, outputs, acceptance criteria), checklist items with validation hooks, expected files/docs/scripts, schema/test requirements, and logging events.\n4. **Execution Guardrails** – Restate Machine Summary, schema validation, FileAccess/atomic write rules, and dual-deployment considerations the implementer must follow.\n\nOutput format (for the human + downstream agents):\n- `Feasibility Review` section summarizing observations, impacted areas, and blockers.\n- `Recommendation` section with explicit Go/No-Go and confirmation instructions.\n- If Go: `Task Module Plan` containing:\n  - Task Outline (task.json fields)\n  - Checklist (`- [ ]` per step with validation notes & log expectations)\n  - Files + Purpose table/list\n  - Validation & Logging requirements (schema/test commands, NDJSON events)\n  - Risks/Dependencies\n- If No-Go: explain blockers and stop.\n\nNever invent APIs or skip the feasibility checkpoint. The response itself is the artifact handed to the user before any repository changes occur.",
    "tags": ["task-creation", "planning", "structured", "task-monitor"],
    "summary": {
      "file": "ai/templates/generated/{{task_id}}_task_creation_prompt.json",
      "purpose": "Generated planning prompt for creating task {{task_id}}"
    }
  }
}
